import{R as h,j as s,a as i,s as x,b as M,c as j,r as u,f as C,g as I,d as v,e as T,h as S}from"./index-D9eC6cFu.js";import{M as _,s as A}from"./MessageTextarea-DSP5mT2V.js";import{a as R}from"./dialogs-selectors-DT3n6bma.js";const b="_groupChat_lz0vf_1",k="_groupChatMessages_lz0vf_5",p={groupChat:b,groupChatMessages:k},V=h.memo(()=>s.jsx("div",{className:p.groupChat,children:s.jsx(E,{})})),E=()=>{const t=i(R),n=i(x);let{userId:c}=M();const o=j(),l=t.messageValue,a=t.placeholder,e=t.dialogs.find(r=>r.id===parseInt(c||"0")),d=n.find(r=>r.userId===(e==null?void 0:e.participants[0].userId)),g=n.find(r=>r.userId===(e==null?void 0:e.participants[1].userId));u.useEffect(()=>(o(C()),()=>{o(I())}),[]);const m=r=>{o(v(r))},f=()=>{if(l.text&&d&&g){const r={senderId:d.userId,receiverId:g.userId};o(T(r)),o(S(l.text))}};return s.jsxs(s.Fragment,{children:[s.jsx(P,{}),s.jsx(_,{placeholder:a,value:l,handleChange:m,handleClick:f})]})},P=()=>{const t=i(A),n=u.useRef(null),[c,o]=u.useState(!0),l=a=>{let e=a.currentTarget;Math.abs(e.scrollHeight-e.scrollTop-e.clientHeight)<100?!c&&o(!0):c&&o(!1)};return u.useEffect(()=>{var a;c&&((a=n.current)==null||a.scrollIntoView({behavior:"smooth"}))},[t]),s.jsxs("div",{className:p.groupChatMessages,onScroll:l,children:[t.map(a=>s.jsx(w,{message:a},a.id)),s.jsx("div",{ref:n})]})},w=h.memo(({message:t})=>s.jsxs("div",{children:[s.jsx("img",{src:t.photo,style:{width:"30px"},alt:"photo"}),s.jsx("br",{}),t.message,s.jsx("hr",{})]}));export{V as default};
