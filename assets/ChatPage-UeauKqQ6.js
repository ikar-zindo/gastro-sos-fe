import{j as e,b as p,c as f,u as j,P as N,d as M,e as k,R as P,a as u,s as C}from"./index-D9eC6cFu.js";import{M as T}from"./MessageTextarea-DSP5mT2V.js";import{a as R}from"./dialogs-selectors-DT3n6bma.js";const A="_chat_ekr8l_1",W="_userInfoWrapper_ekr8l_13",$="_userInfo_ekr8l_13",E="_userName_ekr8l_32",S="_date_ekr8l_39",w="_messages_ekr8l_46",y="_messageItem_ekr8l_67",V="_messageArea_ekr8l_75",d={chat:A,userInfoWrapper:W,userInfo:$,userName:E,date:S,messages:w,messageItem:y,messageArea:V},b="_message_2574v_3",q="_messageText_2574v_12",z="_date_2574v_16",B="_isRead_2574v_21",D="_messageInfo_2574v_26",F="_sentMessage_2574v_31",G="_receivedMessage_2574v_38",l={message:b,messageText:q,date:z,isRead:B,messageInfo:D,sentMessage:F,receivedMessage:G},H=n=>{const t=n.currentUser,c=n.message,m=c.senderId===(t==null?void 0:t.userId)?l.sentMessage:l.receivedMessage;return e.jsxs("div",{className:`${l.message} ${m}`,children:[e.jsx("div",{className:l.messageText,children:c.text}),e.jsxs("div",{className:l.messageInfo,children:[e.jsx("div",{className:l.date,children:c.createdAt}),e.jsx("div",{className:l.isRead,children:c.read?"was read":"no read"})]})]})},J=n=>{const t=n.dialogPage,c=n.users;let{userId:g}=p();const m=f(),i=t.messageValue,h=t.placeholder,r=t.dialogs.find(s=>s.id===parseInt(g||"")),x=r?r.messages:[],o=c.find(s=>s.userId===(r==null?void 0:r.participants[0].userId)),a=c.find(s=>s.userId===(r==null?void 0:r.participants[1].userId));let _=x.map(s=>e.jsx(H,{currentUser:o,message:s},s.id));const I=s=>{m(M(s))},v=()=>{if(i.text&&o&&a){const s={senderId:o.userId,receiverId:a.userId};m(k(s))}};return e.jsxs("div",{className:d.chat,children:[e.jsxs("div",{className:d.userInfoWrapper,children:[e.jsx("img",{alt:"ava",src:(a==null?void 0:a.photos.small)!=null?a==null?void 0:a.photos.small:j}),e.jsxs("div",{className:d.userInfo,children:[e.jsx("p",{className:d.userName,children:a==null?void 0:a.fullName}),e.jsx("p",{className:d.date,children:"5 minutes ego"})]})]}),e.jsx("div",{className:d.messages,children:e.jsx("div",{className:d.messageItem,children:_||e.jsx(N,{})})}),e.jsx(T,{placeholder:h,value:i,handleChange:I,handleClick:v})]})},Q=P.memo(()=>{const n=u(R),t=u(C);return e.jsx(J,{dialogPage:n,users:t})});export{Q as default};
